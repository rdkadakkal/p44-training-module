<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project44 Product Training Module</title>
    
    <style>
        :root {
            /* Project44 Inspired Palette */
            --p44-navy: #1F2A44;      /* Deep Navy */
            --p44-blue: #00C0F3;      /* Cyan/Teal Accent */
            --text-color: #333333;
            --bg-color: #f4f7f6;
            --white: #ffffff;
            --success-green: #28a745;
            --error-red: #dc3545;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- UI: Header --- */
        header {
            background-color: var(--p44-navy);
            color: var(--white);
            padding: 1rem 2rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        header h1 {
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 1.5rem;
        }

        /* --- UI: Main Container --- */
        .container {
            max-width: 800px;
            width: 95%;
            margin: 2rem auto;
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(31, 42, 68, 0.1);
            padding: 2rem;
            flex: 1;
        }

        /* --- UI: Video Section --- */
        .iframe-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .instruction-text {
            text-align: center;
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        /* --- UI: Buttons --- */
        .btn {
            background-color: var(--p44-blue);
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.2s ease;
            display: block;
            margin: 0 auto;
        }

        .btn:hover {
            background-color: #009ac2;
        }

        .btn.secondary {
            background-color: var(--p44-navy);
            margin-top: 10px;
        }

        /* --- UI: Quiz Section --- */
        .quiz-section, .result-section {
            display: none;
        }

        .progress-bar-container {
            width: 100%;
            background-color: #e9ecef;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--p44-navy);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--p44-navy);
            margin-bottom: 1.5rem;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background-color: var(--white);
            border: 2px solid #e0e0e0;
            padding: 15px;
            text-align: left;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s ease;
            color: var(--text-color);
        }

        .option-btn:hover {
            border-color: var(--p44-blue);
            background-color: #f0fbff;
        }

        /* --- UI: Results --- */
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--p44-navy);
            margin-bottom: 1rem;
            text-align: center;
        }

        .result-message {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .hidden {
            display: none !important;
        }

        /* ----------------------------------------------------- */
        /* CERTIFICATE DESIGN (Screen View)                      */
        /* ----------------------------------------------------- */
        
        #certificate-view {
            display: none; 
            background: white;
            text-align: center;
            max-width: 900px;
            margin: 2rem auto;
            border: 1px solid #ddd;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .cert-card {
            position: relative;
            padding: 40px;
            border: 15px solid var(--p44-navy);
            background: #fff;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .cert-inner-border {
            border: 2px solid #ddd;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0; 
            left: 0;
            pointer-events: none;
            margin: 10px;
            width: calc(100% - 20px);
            height: calc(100% - 20px);
        }

        .cert-header {
            font-size: 48px;
            font-weight: bold;
            color: var(--p44-navy);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cert-subtext {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
        }

        .cert-name {
            font-size: 52px;
            font-weight: bold;
            color: var(--p44-blue);
            margin-bottom: 10px;
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
            display: inline-block;
            min-width: 50%;
        }

        .cert-course {
            font-size: 28px;
            font-weight: bold;
            color: var(--p44-navy);
            margin-top: 30px;
            margin-bottom: 50px;
        }

        .cert-footer {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin-top: 40px;
            font-size: 16px;
            color: var(--p44-navy);
        }

        .cert-controls {
            padding: 20px;
            background: #f0f0f0;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        /* ----------------------------------------------------- */
        /* PRINT SPECIFIC STYLES (@media print)                  */
        /* ----------------------------------------------------- */
        @media print {
            
            /* 1. Global Reset to eliminate browser margins */
            @page {
                size: landscape;
                margin: 0;
            }

            html, body {
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
                height: 100% !important;
            }

            /* 2. Hide specific containers */
            header, .container, .cert-controls {
                display: none !important;
            }

            /* 3. Hide everything by default */
            body * {
                visibility: hidden;
            }

            /* 4. Make Certificate View Visible and Fixed */
            #certificate-view, #certificate-view * {
                visibility: visible;
            }

            #certificate-view {
                display: block !important;
                position: fixed; /* Fix: Breaks out of flow to hit page edges */
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                margin: 0 !important;
                padding: 0 !important;
                box-sizing: border-box;
                border: none;
                box-shadow: none;
                background: white;
                z-index: 9999;
                max-width: none !important; /* Override screen max-width */
            }

            /* 5. Adjust Card for Full Page */
            .cert-card {
                width: 100%;
                height: 100%;
                border-width: 10px !important; /* Slightly thinner border for print aesthetics */
                box-sizing: border-box;
                margin: 0;
                min-height: 100vh; /* Ensure it fills height */
            }

            /* Ensure background colors print */
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }

    </style>
</head>
<body>

    <header>
        <h1>Logistics & Visibility Fundamentals</h1>
    </header>

    <!-- MAIN APP CONTAINER -->
    <div class="container" id="app-container">
        
        <!-- SECTION 1: VIDEO -->
        <div id="video-section">
            <h2 style="color: var(--p44-navy); margin-bottom: 1rem;"> Training Video</h2>
            
            <div class="iframe-container">
                <iframe id="google-drive-embed" allow="autoplay; fullscreen" allowfullscreen></iframe>
            </div>

         

            <button class="btn" onclick="finishVideo()">I have finished watching the video</button>
        </div>

        <!-- SECTION 2: QUIZ -->
        <div id="quiz-section" class="quiz-section">
            <div class="progress-bar-container">
                <div id="progress-fill" class="progress-bar-fill"></div>
            </div>
            
            <div id="quiz-container">
                <div id="question-text" class="question-text"></div>
                <div id="options-container" class="options-list"></div>
            </div>
        </div>

        <!-- SECTION 3: RESULTS & INPUT -->
        <div id="result-section" class="result-section">
            <div id="score-text" class="score-display">0%</div>
            <h2 id="result-header" style="color: var(--p44-navy); text-align: center;">Completed</h2>
            <p id="result-detail" class="result-message"></p>

            <!-- Success Area -->
            <div id="success-area" class="hidden" style="margin-top: 2rem; padding: 20px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef;">
                <h3 style="color: #1F2A44; margin-bottom: 1rem;">Course Passed!</h3>
                <p style="margin-bottom: 1.5rem;">Enter your name to generate your certificate.</p>
                
                <div style="max-width: 400px; margin: 0 auto;">
                    <label for="learner-name" style="display: block; text-align: left; font-weight: bold; color: #1F2A44; margin-bottom: 5px;">Full Name:</label>
                    <input type="text" id="learner-name" placeholder="Ex: Jane Doe" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 15px; font-size: 16px;">
                    
                    <button class="btn" onclick="openCertificateView()">Print / Save as PDF</button>
                </div>
            </div>

            <!-- Retry Area -->
            <div id="retry-area" class="hidden">
                <button class="btn secondary" onclick="location.reload()">Retry Module</button>
            </div>
        </div>
    </div>

    <!-- HTML CERTIFICATE VIEW -->
    <div id="certificate-view">
        <div class="cert-card">
            <div class="cert-inner-border"></div>
            
            <div class="cert-header">Certificate of Completion</div>
            <div class="cert-subtext">This certifies that</div>
            
            <div class="cert-name" id="cert-name-display">LEARNER NAME</div>
            
            <div class="cert-subtext" style="margin-top: 20px;">has successfully passed the verified assessment for</div>
            <div class="cert-course">Project44 Product Training</div>

            <div class="cert-footer">
                <div id="cert-date-display">Date: </div>
                <div id="cert-score-display">Score: </div>
            </div>
            
            <div style="margin-top: 40px; font-size: 12px; color: #999;">Verified Corporate Training Module</div>
        </div>

        <div class="cert-controls no-print">
            <button class="btn secondary" onclick="closeCertificateView()">Back / Edit Name</button>
            <button class="btn" onclick="window.print()">Print Now</button>
        </div>
    </div>

    <script>
        // CONFIGURATION
        const videoID = "1kZ1uNSwoQ7_ha4n27RIOwVUSGB5iOblA";
        const quizData = [ 
            { "Question": "According to the sources, what is the legal role of a Freight Forwarder (FFW) in its purest definition?", "Options": [ "Carrier", "Agent", "Vessel Operator", "Consignee" ], "CorrectAnswer": 1 }, 
            { "Question": "Which primary document does an NVOCC issue to the actual shipper to act as a binding contract of carriage?", "Options": [ "Forwarder's Certificate of Receipt (FCR)", "Master Bill of Lading (MBL)", "House Bill of Lading (HBL)", "Shipper's Letter of Instruction (SLI)" ], "CorrectAnswer": 2 }, 
            { "Question": "What type of liability is typically associated with a Freight Forwarder acting as an agent?", "Options": [ "Full Carrier Liability", "Limited Agency Liability (Errors & Omissions)", "Strict Liability for Cargo Damage", "No Liability" ], "CorrectAnswer": 1 }, 
            { "Question": "Which EDI message code is known as the 'heartbeat' of ocean visibility, providing granular status details for major milestones?", "Options": [ "EDI 300", "EDI 301", "EDI 304", "EDI 315" ], "CorrectAnswer": 3 }, 
            { "Question": "Under the US Customs '10+2' rule, when must the Importer Security Filing (ISF) be submitted?", "Options": [ "24 hours after the vessel departs", "24 hours prior to loading at the foreign port", "Upon arrival at the destination port", "48 hours after the container gates in" ], "CorrectAnswer": 1 }, 
            { "Question": "In the context of LCL consolidation, what must an NVOCC provide to link individual HBLs to a single container number in visibility platforms?", "Options": [ "Master Bill of Lading", "Vessel Schedule (EDI 323)", "Container Manifest or Stuffing Report", "Freight Invoice (EDI 310)" ], "CorrectAnswer": 2 }, 
            { "Question": "What is a 'Street Turn' in physical logistics?", "Options": [ "A trucker reusing an empty container for a new export without returning it to the terminal", "A vessel changing course due to weather", "Returning a full container to the wrong terminal gate", "The process of weighing a container on a weighbridge" ], "CorrectAnswer": 0 }, 
            { "Question": "Which EDI 315 segment contains the specific event code, date, and time (e.g., VD for Vessel Departure)?", "Options": [ "B4", "N9", "Q2", "R4" ], "CorrectAnswer": 0 }, 
            { "Question": "What are the two data elements that the carrier must file under the US Customs '10+2' rule?", "Options": [ "Seller Name and Buyer Name", "Container Status Messages and Stow Plan", "Country of Origin and HTS-6 Code", "Manufacturer and Ship to Party" ], "CorrectAnswer": 1 }, 
            { "Question": "Which status code in the B4 segment of an EDI 315 message signifies that a container has been loaded on a vessel?", "Options": [ "OA", "VA", "AE", "UV" ], "CorrectAnswer": 2 } 
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        const passingScore = 80;

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            const iframe = document.getElementById('google-drive-embed');
            iframe.src = `https://drive.google.com/file/d/${videoID}/preview`;
        });

        // --- QUIZ LOGIC ---
        function finishVideo() {
            document.getElementById('video-section').style.display = 'none';
            document.getElementById('quiz-section').style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            const qData = quizData[currentQuestionIndex];
            const progressPercent = (currentQuestionIndex / quizData.length) * 100;
            document.getElementById('progress-fill').style.width = `${progressPercent}%`;
            document.getElementById('question-text').innerText = `${currentQuestionIndex + 1}. ${qData.Question}`;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            qData.Options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => handleAnswer(index);
                optionsContainer.appendChild(btn);
            });
        }

        function handleAnswer(selectedIndex) {
            if(selectedIndex === quizData[currentQuestionIndex].CorrectAnswer) {
                score++;
            }
            currentQuestionIndex++;
            if(currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';

            const finalPercent = Math.round((score / quizData.length) * 100);
            document.getElementById('score-text').innerText = `${finalPercent}%`;
            
            if(finalPercent >= passingScore) {
                document.getElementById('result-header').innerText = "Congratulations!";
                document.getElementById('result-header').style.color = "var(--success-green)";
                document.getElementById('result-detail').innerText = "You have successfully passed the assessment.";
                document.getElementById('success-area').classList.remove('hidden');
            } else {
                document.getElementById('result-header').innerText = "Module Failed";
                document.getElementById('score-text').style.color = "var(--error-red)";
                document.getElementById('result-detail').innerText = `You need ${passingScore}% to pass. Please try again.`;
                document.getElementById('retry-area').classList.remove('hidden');
            }
        }

        // --- CERTIFICATE LOGIC ---

        function openCertificateView() {
            const nameInput = document.getElementById('learner-name');
            const name = nameInput.value.trim();

            if(!name) {
                alert("Please enter your full name first.");
                return;
            }

            // Populate Certificate Data
            document.getElementById('cert-name-display').innerText = name;
            document.getElementById('cert-date-display').innerText = "Date: " + new Date().toLocaleDateString();
            const finalPercent = Math.round((score / quizData.length) * 100);
            document.getElementById('cert-score-display').innerText = "Score: " + finalPercent + "%";

            // Hide Main App (on screen)
            document.getElementById('app-container').style.display = 'none';
            document.querySelector('header').style.display = 'none';

            // Show Certificate View
            document.getElementById('certificate-view').style.display = 'block';

            // Auto Trigger Print
            setTimeout(() => {
                window.print();
            }, 500);
        }

        function closeCertificateView() {
            // Show Main App
            document.getElementById('app-container').style.display = 'block';
            document.querySelector('header').style.display = 'block';

            // Hide Certificate View
            document.getElementById('certificate-view').style.display = 'none';
        }

    </script>
</body>
</html>
